{{ define "main" }}
<section class="section container">
  <header class="mb-5">
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-start gap-3">
      <div>
        <h1 class="mb-2">{{ .Title }}</h1>
        <p class="lead mb-2">{{ .Params.summary | default .Params.description }}</p>
      </div>
      {{ with .OutputFormats.Get "RSS" }}
      <a class="btn btn-outline-primary btn-sm rounded-pill" href="{{ .RelPermalink }}">RSS</a>
      {{ end }}
    </div>
    {{ with .Content }}
    <div class="mt-3">{{ . }}</div>
    {{ end }}
  </header>

  {{ $paginator := .Paginate (.Pages.ByDate.Reverse) }}
  {{ if gt (len $paginator.Pages) 0 }}
  <div class="d-grid gap-4">
    {{ range $paginator.Pages }}
    <article class="p-4 border rounded-4">
      <div class="d-flex flex-column flex-lg-row gap-4 align-items-start align-items-lg-center">
        <div class="flex-grow-1">
          <p class="text-muted small mb-2">{{ .Date.Format "Jan 2, 2006" }} Â· {{ .ReadingTime }} min read</p>
          <h2 class="h4"><a class="text-decoration-none" href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          <p class="mb-3">{{ .Summary }}</p>
          <div class="d-flex flex-wrap gap-2">
            {{ range .GetTerms "tags" }}
            <a class="badge bg-light text-dark text-decoration-none" href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
            {{ end }}
          </div>
        </div>
        {{ if .Params.images }}
        {{ $imgName := index .Params.images 0 }}
        <div class="blog-list__media">
          {{ partial "img.html" (dict "page" . "src" $imgName "class" "blog-list__img" "alt" .Title "width" 480) }}
        </div>
        {{ end }}
      </div>
    </article>
    {{ end }}
  </div>

  <div class="mt-5">
    {{ template "_internal/pagination.html" . }}
  </div>
  {{ else }}
  <p class="text-muted">No posts yet.</p>
  {{ end }}
</section>
{{ end }}
